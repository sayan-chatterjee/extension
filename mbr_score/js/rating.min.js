var GOAL_BUDGET="Budget",GOAL_OUTSTANDING="Outstanding",GOAL_TARGET_FOR_SCORE="Target for a Score",GOAL_ACHIEVEMENT="Achievement so far",GOAL_RATING_KEY="Enter rating between";function calcltePostveRatngWithTarget(A){var E;return A.GOAL_ACHIEVEMENT<A.GOAL_BUDGET?E=0:A.GOAL_ACHIEVEMENT===A.GOAL_BUDGET?E=1:A.GOAL_ACHIEVEMENT===A.GOAL_OUTSTANDING?E=3:A.GOAL_ACHIEVEMENT>=A.GOAL_TARGET_FOR_SCORE?E=4:A.GOAL_ACHIEVEMENT>A.GOAL_BUDGET&&A.GOAL_ACHIEVEMENT<A.GOAL_OUTSTANDING?E=1+(A.GOAL_ACHIEVEMENT-A.GOAL_BUDGET)/(A.GOAL_OUTSTANDING-A.GOAL_BUDGET)*2:A.GOAL_ACHIEVEMENT>A.GOAL_OUTSTANDING&&A.GOAL_ACHIEVEMENT<A.GOAL_TARGET_FOR_SCORE&&(E=3+(A.GOAL_ACHIEVEMENT-A.GOAL_OUTSTANDING)/(A.GOAL_TARGET_FOR_SCORE-A.GOAL_OUTSTANDING)),E.toFixed(2)}function calclteNegtveRatngWithTarget(A){var E;return A.GOAL_ACHIEVEMENT>A.GOAL_BUDGET?E=0:A.GOAL_ACHIEVEMENT===A.GOAL_BUDGET?E=1:A.GOAL_ACHIEVEMENT===A.GOAL_OUTSTANDING?E=3:A.GOAL_ACHIEVEMENT<=A.GOAL_TARGET_FOR_SCORE?E=4:A.GOAL_ACHIEVEMENT<A.GOAL_BUDGET&&A.GOAL_ACHIEVEMENT>A.GOAL_OUTSTANDING?E=1+(A.GOAL_ACHIEVEMENT-A.GOAL_BUDGET)/(A.GOAL_OUTSTANDING-A.GOAL_BUDGET)*2:A.GOAL_ACHIEVEMENT<A.GOAL_OUTSTANDING&&A.GOAL_ACHIEVEMENT>A.GOAL_TARGET_FOR_SCORE&&(E=3+(A.GOAL_ACHIEVEMENT-A.GOAL_OUTSTANDING)/(A.GOAL_TARGET_FOR_SCORE-A.GOAL_OUTSTANDING)),E.toFixed(2)}function calcltePostveRatngWithoutTarget(A){var E;return A.GOAL_ACHIEVEMENT<A.GOAL_BUDGET?E=0:A.GOAL_ACHIEVEMENT===A.GOAL_BUDGET?E=1:A.GOAL_ACHIEVEMENT===A.GOAL_OUTSTANDING?E=3:A.GOAL_ACHIEVEMENT>A.GOAL_OUTSTANDING?E=4:A.GOAL_ACHIEVEMENT>A.GOAL_BUDGET&&A.GOAL_ACHIEVEMENT<A.GOAL_OUTSTANDING&&(E=1+(A.GOAL_ACHIEVEMENT-A.GOAL_BUDGET)/(A.GOAL_OUTSTANDING-A.GOAL_BUDGET)*2),E.toFixed(2)}function calclteNegtveRatngWithoutTarget(A){var E;return A.GOAL_ACHIEVEMENT>A.GOAL_BUDGET?E=0:A.GOAL_ACHIEVEMENT===A.GOAL_BUDGET?E=1:A.GOAL_ACHIEVEMENT===A.GOAL_OUTSTANDING?E=3:A.GOAL_ACHIEVEMENT<A.GOAL_OUTSTANDING?E=4:A.GOAL_ACHIEVEMENT>A.GOAL_OUTSTANDING&&A.GOAL_ACHIEVEMENT<A.GOAL_BUDGET&&(E=1+(A.GOAL_ACHIEVEMENT-A.GOAL_BUDGET)/(A.GOAL_OUTSTANDING-A.GOAL_BUDGET)*2),E.toFixed(2)}function calculateRating(A){if(null==A.GOAL_ACHIEVEMENT||isNaN(A.GOAL_ACHIEVEMENT))return"";var E=A.GOAL_OUTSTANDING-A.GOAL_BUDGET;if(A.hasOwnProperty("GOAL_TARGET_FOR_SCORE")){if(console.log(GOAL_TARGET_FOR_SCORE+" : ",A.GOAL_TARGET_FOR_SCORE),E>0)return calcltePostveRatngWithTarget(A);if(E<0)return calclteNegtveRatngWithTarget(A)}else{if(console.log(GOAL_TARGET_FOR_SCORE+" does not exist : ",A),E>0)return calcltePostveRatngWithoutTarget(A);if(E<0)return calclteNegtveRatngWithoutTarget(A)}}$(document).ready(function(){var A=$("#formTB_edit0"),E=$(A).find("table").find("tr"),G={GOAL_BUDGET:0,GOAL_OUTSTANDING:0,GOAL_ACHIEVEMENT:0};$.each(E,function(A,E){var O=$(E).find("th").find("label").text(),T=0;-1!=O.indexOf(GOAL_BUDGET)?(console.log("label : ",O),T=$(E).find("td").find("label").html(),console.log("value : ",T),G.GOAL_BUDGET=parseFloat(T.replace("%",""))):-1!=O.indexOf(GOAL_OUTSTANDING)?(console.log("label : ",O),T=$(E).find("td").find("label").html(),console.log("value : ",T),G.GOAL_OUTSTANDING=parseFloat(T)):-1!=O.indexOf(GOAL_TARGET_FOR_SCORE)?(console.log("label : ",O),T=$(E).find("td").find("label").html(),console.log("value : ",T),G.GOAL_TARGET_FOR_SCORE=parseFloat(T)):-1!=O.indexOf(GOAL_ACHIEVEMENT)?(T=$(E).find("td").find("input").val(),console.log("Achievement so far value : ",T),G.GOAL_ACHIEVEMENT=parseFloat(T),$(E).find("td").find("input").attr("data-type","user-input")):-1!=O.indexOf(GOAL_RATING_KEY)&&$(E).find("td").find("input").attr("data-identifier","goal-rating")}),$("input[data-identifier='goal-rating']").attr("value",calculateRating(G)),$("input[data-identifier='goal-rating']").attr("readonly",!0),$("input[data-type='user-input']").keyup(function(){console.log("user entered data..."),G.GOAL_ACHIEVEMENT=parseFloat($(this).val()),$("input[data-identifier='goal-rating']").attr("value",calculateRating(G))})});