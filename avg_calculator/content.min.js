var calculateButton='<div class=" pmFooterButtonSpacing"><span id="_calculate_span" class="buttonset sfDialogBoxButtonWrapper"><span><button style="background-color: azure;" class="globalRoundedCornersXSmall globalSecondaryButton buttonDefault" id="_calculate_button" type="button" accesskey="2">Calculate</button></span></span></div>',footerButtons=$("#footer_buttons_rev").html();function getQuarterId(){var t=$("div[id='381:_stepsChartStepName']").html().toLowerCase();return-1!=t.indexOf("q1")?"#sect_3":-1!=t.indexOf("q2")?"#sect_4":-1!=t.indexOf("q3")?"#sect_5":-1!=t.indexOf("q4")?"#sect_6":void 0}function createKraList(t,e){for(var a=[],l="Achievement (RA)".toLowerCase(),r="Achievement (Employee)".toLowerCase(),n=0;n<t.length;n+=4){for(var o={goalWeightage:0,raInput:0,empInput:0},s=0;s<4;s++){var c=$(t[n+s]).find("td[class='lab']").html().toLowerCase(),u=$(t[n+s]).find("td[class='val']").html();"goal weightage"===c?(u=null==u?0:u,o.goalWeightage=parseFloat(u.replace("%",""))):-1!=c.indexOf(l)&&(u=null==u?0:u,o.raInput=parseFloat(u.replace("%","")))}a.push(o)}var i=0;for(n=0;n<e.length;n++){var f=$(e[n]).find("td[class='lab']").html().toLowerCase(),p=$(e[n]).find("td[class='val']").html();-1!=f.indexOf(r)&&(p=null==p?0:p,a[i++].empInput=parseFloat(p.replace("%","")))}return a}function calculateAchievement(t){for(var e=0,a=0,l=0;l<t.length;l++){var r=t[l].goalWeightage;e+=r*t[l].empInput,a+=r*t[l].raInput}return{empActual:(e/100).toFixed(2),raActual:(a/100).toFixed(2)}}$("#footer_buttons_rev").html(calculateButton+footerButtons),$("#wf_sect_7_e_0").val("0.00 %"),$("#wf_sect_8_e_ele_10").val("0.00 %"),$("#_calculate_button").click(function(){for(var t=getQuarterId(),e=$(t),a=e.find("div[class='leftTabs']"),l=e.find("div[class='rightTabs']"),r=[],n=[],o=0;o<a.length;o++)for(var s=$(a[o]).find("tr[class='propTable']"),c=0;c<s.length;c++)r.push(s[c]);for(o=0;o<l.length;o++){var u=$(l[o]).find("tr[class='propTable']");for(c=0;c<u.length;c++)n.push(u[c])}var i=calculateAchievement(createKraList(r,n));$("#wf_sect_7_e_0").val(i.empActual+" %"),$("#wf_sect_8_e_ele_10").val(i.raActual+" %")});