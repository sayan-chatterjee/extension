var EMPTY_STRING="",empWghtdAvgTextInput=$("#sect_7 div[class='HRContentCell'] input"),raWghtdAvgTextInput=$("#sect_8 div[class='HRContentCell'] input");function getQuarterId(){var e=$("div[class='sfStepsChartNameContainer'] div[class='sfStepsChartStepName sfStepsChartStepNamePosition']").html().toLowerCase();return-1!=e.indexOf("q1")?"#sect_3":-1!=e.indexOf("q2")?"#sect_4":-1!=e.indexOf("q3")?"#sect_5":-1!=e.indexOf("q4")?"#sect_6":void 0}function createKraList(e,t){for(var a=[],l="Achievement (RA)".toLowerCase(),r="Achievement (Employee)".toLowerCase(),n=!1,s=0;s<e.length;s++){var i=!1,p={goalWeightage:NaN,raInput:NaN,empInput:NaN},c=$(e[s]).find("td[class='lab']").html().toLowerCase(),o=$(e[s]).find("td[class='val']").html();"goal weightage"===c&&(o=null==o||EMPTY_STRING===o?NaN:o,p.goalWeightage=Number.isNaN(o)?NaN:parseFloat(o.replace("%","")),i=!0,n=!0),-1!=c.indexOf(l)&&n&&(o=null==o||EMPTY_STRING===o?NaN:o,(p=a.pop()).raInput=Number.isNaN(o)?NaN:parseFloat(o.replace("%","")),i=!0,n=!1),i&&a.push(p)}var u=0;for(s=0;s<t.length;s++){var d=$(t[s]).find("td[class='lab']").html().toLowerCase(),N=$(t[s]).find("td[class='val']").html();-1!=d.indexOf(r)&&(N=null==N||EMPTY_STRING===N?NaN:N,a[u++].empInput=Number.isNaN(N)?NaN:parseFloat(N.replace("%","")))}return a}function calculateAchievement(e){for(var t=0,a=0,l=0;l<e.length;l++){var r=e[l].goalWeightage;t+=r*e[l].empInput,a+=r*e[l].raInput}return{empActual:(t/100).toFixed(2),raActual:(a/100).toFixed(2)}}function calculate(){for(var e=getQuarterId(),t=$(e),a=t.find("div[class='leftTabs']"),l=t.find("div[class='rightTabs']"),r=[],n=[],s=0;s<a.length;s++)for(var i=$(a[s]).find("tr[class='propTable']"),p=0;p<i.length;p++)r.push(i[p]);for(s=0;s<l.length;s++){var c=$(l[s]).find("tr[class='propTable']");for(p=0;p<c.length;p++)n.push(c[p])}var o=calculateAchievement(createKraList(r,n));empWghtdAvgTextInput.val(isNaN(o.empActual)?"NA":o.empActual+" %"),raWghtdAvgTextInput.val(isNaN(o.raActual)?"NA":o.raActual+" %")}empWghtdAvgTextInput.prop("disabled",!0),raWghtdAvgTextInput.prop("disabled",!0),$(document).ready(function(){calculate()});