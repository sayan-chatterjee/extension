var calculateButton='<div class=" pmFooterButtonSpacing"><span id="_calculate_span" class="buttonset sfDialogBoxButtonWrapper"><span><button style="background-color: azure;" class="globalRoundedCornersXSmall globalSecondaryButton buttonDefault" id="_calculate_button" type="button" accesskey="2">Calculate</button></span></span></div>',footerButtons=$("#footer_buttons_rev").html();function getQuarterId(){var e=$("div[id='381:_stepsChartStepName']").html().toLowerCase();return-1!=e.indexOf("q1")?"#sect_3":-1!=e.indexOf("q2")?"#sect_4":-1!=e.indexOf("q3")?"#sect_5":-1!=e.indexOf("q4")?"#sect_6":void 0}function createKraList(e,t){for(var a=[],l="Achievement (RA)".toLowerCase(),o="Achievement (Employee)".toLowerCase(),r=0;r<e.length;r+=4){for(var n={goalWeightage:0,raInput:0,empInput:0},s=0;s<4;s++){var c=$(e[r+s]).find("td[class='lab']").html().toLowerCase(),u=$(e[r+s]).find("td[class='val']").html();"goal weightage"===c?(u=null==u?0:u,n.goalWeightage=parseFloat(u.replace("%",""))):-1!=c.indexOf(l)&&(u=null==u?0:u,n.raInput=parseFloat(u.replace("%","")))}a.push(n)}var i=0;for(r=0;r<t.length;r++){var f=$(t[r]).find("td[class='lab']").html().toLowerCase(),p=$(t[r]).find("td[class='val']").html();console.log("rLabel :",f),console.log("rValue :",p),-1!=f.indexOf(o)&&(p=null==p?0:p,a[i++].empInput=parseFloat(p.replace("%","")))}return a}function calculateAchievement(e){for(var t=0,a=0,l=0;l<e.length;l++){var o=e[l].goalWeightage;t+=o*e[l].empInput,a+=o*e[l].raInput}var r={empActual:(t/100).toFixed(2),raActual:(a/100).toFixed(2)};return console.log("result :",r),r}$("#footer_buttons_rev").html(calculateButton+footerButtons),$("#wf_sect_7_e_0").val("0.00 %"),$("#wf_sect_8_e_ele_10").val("0.00 %"),$("#_calculate_button").click(function(){for(var e=getQuarterId(),t=$(e),a=t.find("div[class='leftTabs']"),l=t.find("div[class='rightTabs']"),o=[],r=[],n=0;n<a.length;n++)for(var s=$(a[n]).find("tr[class='propTable']"),c=0;c<s.length;c++)o.push(s[c]);for(n=0;n<l.length;n++){var u=$(l[n]).find("tr[class='propTable']");for(c=0;c<u.length;c++)r.push(u[c])}var i=calculateAchievement(createKraList(o,r));$("#wf_sect_7_e_0").val(i.empActual+" %"),$("#wf_sect_8_e_ele_10").val(i.raActual+" %")});