var empWghtdAvgTextInput,raWghtdAvgTextInput,EMPTY_STRING="";function getQuarterId(){var t=$("div[class='sfStepsChartNameContainer'] div[class='sfStepsChartStepName sfStepsChartStepNamePosition']").html().toLowerCase();return empWghtdAvgTextInput=$("#sect_7 div[class='HRContentCell'] input"),raWghtdAvgTextInput=$("#sect_8 div[class='HRContentCell'] input"),-1!=t.indexOf("q1")?"#sect_3":-1!=t.indexOf("q2")?"#sect_4":-1!=t.indexOf("q3")?"#sect_5":-1!=t.indexOf("q4")?(empWghtdAvgTextInput=$("#sect_4 div[class='HRContentCell'] input"),raWghtdAvgTextInput=$("#sect_5 div[class='HRContentCell'] input"),"#sect_3"):void 0}function createKraList(t,e){for(var a=[],l="Achievement (RA)".toLowerCase(),n="Achievement (Employee)".toLowerCase(),r=!1,s=0;s<t.length;s++){var p=!1,i={goalWeightage:NaN,raInput:NaN,empInput:NaN},c=$(t[s]).find("td[class='lab']").html().toLowerCase(),u=$(t[s]).find("td[class='val']").html();"goal weightage"===c&&(u=null==u||EMPTY_STRING===u?NaN:u,i.goalWeightage=Number.isNaN(u)?NaN:parseFloat(u.replace("%","")),p=!0,r=!0),-1!=c.indexOf(l)&&r&&(u=null==u||EMPTY_STRING===u?NaN:u,(i=a.pop()).raInput=Number.isNaN(u)?NaN:parseFloat(u.replace("%","")),p=!0,r=!1),p&&a.push(i)}var d=0;for(s=0;s<e.length;s++){var o=$(e[s]).find("td[class='lab']").html().toLowerCase(),g=$(e[s]).find("td[class='val']").html();-1!=o.indexOf(n)&&(g=null==g||EMPTY_STRING===g?NaN:g,a[d++].empInput=Number.isNaN(g)?NaN:parseFloat(g.replace("%","")))}return a}function calculateAchievement(t){for(var e=0,a=0,l=0;l<t.length;l++){var n=t[l].goalWeightage;e+=n*t[l].empInput,a+=n*t[l].raInput}return{empActual:(e/100).toFixed(2),raActual:(a/100).toFixed(2)}}function calculate(){for(var t=getQuarterId(),e=$(t),a=e.find("div[class='leftTabs']"),l=e.find("div[class='rightTabs']"),n=[],r=[],s=0;s<a.length;s++)for(var p=$(a[s]).find("tr[class='propTable']"),i=0;i<p.length;i++)n.push(p[i]);for(s=0;s<l.length;s++){var c=$(l[s]).find("tr[class='propTable']");for(i=0;i<c.length;i++)r.push(c[i])}var u=calculateAchievement(createKraList(n,r));empWghtdAvgTextInput.val(isNaN(u.empActual)?"NA":u.empActual+" %"),raWghtdAvgTextInput.val(isNaN(u.raActual)?"NA":u.raActual+" %"),empWghtdAvgTextInput.prop("disabled",!0),raWghtdAvgTextInput.prop("disabled",!0)}$(document).ready(function(){calculate()});